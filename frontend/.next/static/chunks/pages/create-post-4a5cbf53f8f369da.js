(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[223],{3284:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-post",function(){return s(218)}])},3963:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(4848);s(6540);var a=s(1468),l=s(6715),n=s(4596),o=s(1106),u=s.n(o);let c=()=>{let e=(0,a.wA)(),{token:t}=(0,a.d4)(e=>e.auth),s=(0,l.useRouter)();return(0,r.jsxs)("nav",{className:"bg-blue-500 p-4 text-white flex justify-between",children:[(0,r.jsx)(u(),{className:"font-bold text-lg",href:"/",children:"Blog"}),(0,r.jsx)("div",{children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u(),{className:"mr-4",href:"/create-post",children:"Create Post"}),(0,r.jsx)("button",{onClick:()=>{e((0,n.q0)()),s.push("/login")},className:"text-white",children:"Logout"})]}):(0,r.jsx)(u(),{href:"/login",className:"mr-4",children:"Login"})})]})}},218:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(4848),a=s(6540),l=s(6715),n=s(1468),o=s(3963),u=s(7451);let c=()=>{let[e,t]=(0,a.useState)(""),[s,o]=(0,a.useState)(""),c=(0,n.d4)(e=>{var t;return null===(t=e.auth)||void 0===t?void 0:t.token}),i=(0,l.useRouter)(),h=async()=>{try{if(!c){alert("Authorization token is missing");return}await u.A.post("/posts/api/posts/",{title:e,content:s},{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"}}),alert("Post created successfully!"),i.push("/")}catch(e){console.error("Error Response:",e.response),alert("Failed to create post")}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl",children:"Create Post"}),(0,r.jsx)("input",{type:"text",placeholder:"Title",value:e,onChange:e=>t(e.target.value),className:"border p-2 w-full"}),(0,r.jsx)("textarea",{placeholder:"Content",value:s,onChange:e=>o(e.target.value),className:"border p-2 w-full mt-2"}),(0,r.jsx)("button",{onClick:h,className:"bg-blue-500 text-white p-2 mt-4",children:"Submit"})]})},i=()=>{let{token:e}=(0,n.d4)(e=>e.auth),t=(0,l.useRouter)();return console.log(e),(0,a.useEffect)(()=>{e||t.push("/login")},[e,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("div",{className:"container mx-auto mt-6",children:(0,r.jsx)(c,{})})]})}},7451:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let r=s(4335).A.create({baseURL:"http://localhost:8000"});r.interceptors.request.use(e=>e);let a=r}},e=>{var t=t=>e(e.s=t);e.O(0,[335,392,636,593,792],()=>t(3284)),_N_E=e.O()}]);